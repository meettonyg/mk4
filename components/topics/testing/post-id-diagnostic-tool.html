<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Topics Post ID Diagnostic Tool</title>\n    <style>\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 20px;\n            background: #f5f5f5;\n        }\n        .container {\n            background: white;\n            padding: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n        h1 {\n            color: #333;\n            border-bottom: 2px solid #0073aa;\n            padding-bottom: 10px;\n        }\n        .button {\n            background: #0073aa;\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 16px;\n            margin: 10px 5px;\n        }\n        .button:hover {\n            background: #005a87;\n        }\n        .output {\n            background: #1e1e1e;\n            color: #fff;\n            padding: 15px;\n            border-radius: 4px;\n            font-family: 'Courier New', monospace;\n            font-size: 14px;\n            white-space: pre-wrap;\n            margin: 10px 0;\n            max-height: 400px;\n            overflow-y: auto;\n        }\n        .info {\n            background: #e7f3ff;\n            border-left: 4px solid #0073aa;\n            padding: 15px;\n            margin: 15px 0;\n        }\n        .warning {\n            background: #fff3cd;\n            border-left: 4px solid #ffc107;\n            padding: 15px;\n            margin: 15px 0;\n        }\n        .error {\n            background: #f8d7da;\n            border-left: 4px solid #dc3545;\n            padding: 15px;\n            margin: 15px 0;\n        }\n        .success {\n            background: #d4edda;\n            border-left: 4px solid #28a745;\n            padding: 15px;\n            margin: 15px 0;\n        }\n        input[type=\"text\"] {\n            width: 200px;\n            padding: 8px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            margin: 5px;\n        }\n        .section {\n            margin: 20px 0;\n            padding: 15px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>üîç Topics Post ID Diagnostic Tool</h1>\n        \n        <div class=\"info\">\n            <strong>Purpose:</strong> This tool helps diagnose why the Topics component shows \"No post ID available\" and provides solutions to fix it.\n        </div>\n\n        <div class=\"section\">\n            <h2>üìä Quick Diagnostic</h2>\n            <p>Run this diagnostic to check your current page for post ID detection issues:</p>\n            <button class=\"button\" onclick=\"runDiagnostic()\">üöÄ Run Diagnostic</button>\n            <div id=\"diagnosticOutput\" class=\"output\" style=\"display: none;\"></div>\n        </div>\n\n        <div class=\"section\">\n            <h2>üîß Quick Fix</h2>\n            <p>If you know your post ID, you can quickly fix the issue:</p>\n            <label for=\"postIdInput\">Enter your post ID:</label>\n            <input type=\"text\" id=\"postIdInput\" placeholder=\"e.g., 123\" pattern=\"[0-9]+\">\n            <button class=\"button\" onclick=\"applyQuickFix()\">üéØ Apply Fix</button>\n            <div id=\"quickFixOutput\" class=\"output\" style=\"display: none;\"></div>\n        </div>\n\n        <div class=\"section\">\n            <h2>üìù Manual Solutions</h2>\n            <div class=\"info\">\n                <strong>Solution 1:</strong> Add post_id to your URL<br>\n                Change: <code>https://yoursite.com/guestify-media-kit</code><br>\n                To: <code>https://yoursite.com/guestify-media-kit?post_id=123</code>\n            </div>\n            <div class=\"info\">\n                <strong>Solution 2:</strong> Enable WordPress debug mode<br>\n                Add to wp-config.php: <code>define('WP_DEBUG', true);</code>\n            </div>\n            <div class=\"info\">\n                <strong>Solution 3:</strong> Check WordPress error logs<br>\n                Look for \"PHASE 1.1 Topics POST ID DEBUG\" entries\n            </div>\n        </div>\n\n        <div class=\"section\">\n            <h2>üîç Advanced Diagnostic</h2>\n            <button class=\"button\" onclick=\"runAdvancedDiagnostic()\">üî¨ Advanced Diagnostic</button>\n            <div id=\"advancedOutput\" class=\"output\" style=\"display: none;\"></div>\n        </div>\n\n        <div class=\"section\">\n            <h2>üìû Support Information</h2>\n            <p>If you need help, share this information:</p>\n            <button class=\"button\" onclick=\"generateSupportInfo()\">üìã Generate Support Info</button>\n            <div id=\"supportOutput\" class=\"output\" style=\"display: none;\"></div>\n        </div>\n    </div>\n\n    <script>\n        function runDiagnostic() {\n            const output = document.getElementById('diagnosticOutput');\n            output.style.display = 'block';\n            output.innerHTML = 'Running diagnostic...\\n';\n            \n            setTimeout(() => {\n                let result = 'üîç POST ID DIAGNOSTIC RESULTS\\n';\n                result += '================================\\n\\n';\n                \n                // Check URL\n                const urlParams = new URLSearchParams(window.location.search);\n                const postId = urlParams.get('post_id') || urlParams.get('p');\n                result += `Current URL: ${window.location.href}\\n`;\n                result += `Post ID from URL: ${postId || 'NOT FOUND'}\\n\\n`;\n                \n                // Check DOM\n                const topicsComponent = document.querySelector('.topics-component');\n                result += `Topics component found: ${topicsComponent ? 'YES' : 'NO'}\\n`;\n                if (topicsComponent) {\n                    result += `DOM post ID: ${topicsComponent.dataset.postId || 'NOT FOUND'}\\n`;\n                    result += `Post ID source: ${topicsComponent.dataset.postIdSource || 'NOT FOUND'}\\n`;\n                }\n                \n                // Check window data\n                result += `\\nWindow data:\\n`;\n                result += `  gmkbData.postId: ${window.gmkbData?.postId || 'NOT FOUND'}\\n`;\n                result += `  guestifyData.postId: ${window.guestifyData?.postId || 'NOT FOUND'}\\n`;\n                \n                // Recommendations\n                result += '\\nüí° RECOMMENDATIONS:\\n';\n                if (!postId) {\n                    result += '‚ùå No post ID in URL - Add ?post_id=YOUR_POST_ID to the URL\\n';\n                } else {\n                    result += '‚úÖ Post ID found in URL\\n';\n                }\n                \n                if (!topicsComponent) {\n                    result += '‚ùå Topics component not found - Check if component is loaded\\n';\n                } else if (topicsComponent.dataset.postId === '0') {\n                    result += '‚ùå Component has no post ID - Check post ID detection\\n';\n                } else {\n                    result += '‚úÖ Component has post ID\\n';\n                }\n                \n                output.innerHTML = result;\n            }, 500);\n        }\n        \n        function applyQuickFix() {\n            const postIdInput = document.getElementById('postIdInput');\n            const postId = postIdInput.value.trim();\n            const output = document.getElementById('quickFixOutput');\n            \n            output.style.display = 'block';\n            \n            if (!postId || !/^[0-9]+$/.test(postId)) {\n                output.innerHTML = '‚ùå ERROR: Please enter a valid numeric post ID';\n                return;\n            }\n            \n            let result = 'üîß APPLYING QUICK FIX...\\n';\n            result += '========================\\n\\n';\n            \n            // Method 1: Update URL\n            const currentUrl = window.location.href;\n            const separator = currentUrl.includes('?') ? '&' : '?';\n            const newUrl = currentUrl + separator + 'post_id=' + postId;\n            \n            result += `Method 1: Update URL\\n`;\n            result += `Current: ${currentUrl}\\n`;\n            result += `New: ${newUrl}\\n\\n`;\n            \n            // Method 2: Update DOM\n            const topicsComponent = document.querySelector('.topics-component');\n            if (topicsComponent) {\n                topicsComponent.dataset.postId = postId;\n                result += `Method 2: Updated DOM post ID to ${postId}\\n\\n`;\n            }\n            \n            result += 'üéØ NEXT STEPS:\\n';\n            result += '1. Refresh the page with the new URL\\n';\n            result += '2. Check if topics now load correctly\\n';\n            result += '3. If still not working, check WordPress debug logs\\n\\n';\n            \n            result += 'üîó Auto-redirect in 5 seconds...\\n';\n            \n            output.innerHTML = result;\n            \n            // Auto-redirect\n            setTimeout(() => {\n                window.location.href = newUrl;\n            }, 5000);\n        }\n        \n        function runAdvancedDiagnostic() {\n            const output = document.getElementById('advancedOutput');\n            output.style.display = 'block';\n            output.innerHTML = 'Running advanced diagnostic...\\n';\n            \n            setTimeout(() => {\n                let result = 'üî¨ ADVANCED DIAGNOSTIC RESULTS\\n';\n                result += '===============================\\n\\n';\n                \n                // Browser info\n                result += `Browser: ${navigator.userAgent}\\n`;\n                result += `Page loaded: ${document.readyState}\\n`;\n                result += `Current time: ${new Date().toISOString()}\\n\\n`;\n                \n                // JavaScript environment\n                result += 'JavaScript Environment:\\n';\n                result += `  jQuery available: ${typeof jQuery !== 'undefined'}\\n`;\n                result += `  WordPress API: ${typeof wp !== 'undefined'}\\n`;\n                result += `  GMKB system: ${typeof window.GMKB !== 'undefined'}\\n`;\n                result += `  Topics manager: ${typeof window.simplifiedTopicsManager !== 'undefined'}\\n\\n`;\n                \n                // DOM analysis\n                result += 'DOM Analysis:\\n';\n                const allElements = document.querySelectorAll('[data-post-id]');\n                result += `  Elements with data-post-id: ${allElements.length}\\n`;\n                allElements.forEach((el, i) => {\n                    result += `    ${i + 1}. ${el.tagName}.${el.className}: ${el.dataset.postId}\\n`;\n                });\n                \n                // Console errors\n                result += '\\nConsole Log Check:\\n';\n                result += 'Open browser console (F12) to check for JavaScript errors\\n';\n                \n                output.innerHTML = result;\n            }, 1000);\n        }\n        \n        function generateSupportInfo() {\n            const output = document.getElementById('supportOutput');\n            output.style.display = 'block';\n            \n            let info = 'üìã SUPPORT INFORMATION\\n';\n            info += '====================\\n\\n';\n            \n            info += `URL: ${window.location.href}\\n`;\n            info += `User Agent: ${navigator.userAgent}\\n`;\n            info += `Timestamp: ${new Date().toISOString()}\\n\\n`;\n            \n            // URL parameters\n            const urlParams = new URLSearchParams(window.location.search);\n            info += 'URL Parameters:\\n';\n            if (urlParams.toString()) {\n                for (const [key, value] of urlParams) {\n                    info += `  ${key}: ${value}\\n`;\n                }\n            } else {\n                info += '  None\\n';\n            }\n            \n            // DOM info\n            const topicsComponent = document.querySelector('.topics-component');\n            info += '\\nTopics Component:\\n';\n            if (topicsComponent) {\n                info += `  Found: YES\\n`;\n                info += `  Post ID: ${topicsComponent.dataset.postId || 'none'}\\n`;\n                info += `  Post ID Source: ${topicsComponent.dataset.postIdSource || 'none'}\\n`;\n                info += `  Has Topics: ${topicsComponent.dataset.hasTopics || 'none'}\\n`;\n                info += `  Topics Count: ${topicsComponent.dataset.topicsCount || 'none'}\\n`;\n            } else {\n                info += '  Found: NO\\n';\n            }\n            \n            info += '\\nPlease share this information when requesting support.\\n';\n            \n            output.innerHTML = info;\n        }\n        \n        // Auto-run diagnostic if in debug mode\n        if (window.location.search.includes('debug')) {\n            setTimeout(runDiagnostic, 1000);\n        }\n    </script>\n</body>\n</html>