/* Component Controls Module - Dynamic Controls for Edit/Duplicate/Delete/Move */
/* ROOT FIX: Enhanced specificity to override any conflicting styles */

/* Component controls container styling with maximum specificity */
.gmkb-isolated-builder .component-controls,
.builder .component-controls,
.media-kit .component-controls,
[data-component-id] .component-controls {
    position: absolute !important;
    top: 8px !important;
    right: 8px !important;
    z-index: 10000 !important;
    transition: all 0.2s ease !important;
    pointer-events: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
}

.gmkb-isolated-builder .component-controls--dynamic,
.builder .component-controls--dynamic,
.media-kit .component-controls--dynamic,
[data-component-id] .component-controls--dynamic {
    background: rgba(0, 0, 0, 0.9) !important;
    border-radius: 6px !important;
    padding: 4px !important;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.4) !important;
    backdrop-filter: blur(8px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    display: flex !important;
}

/* Component controls toolbar with enhanced specificity */
.gmkb-isolated-builder .component-controls__toolbar,
.builder .component-controls__toolbar,
.media-kit .component-controls__toolbar {
    display: flex !important;
    align-items: center !important;
    gap: 4px !important;
}

.gmkb-isolated-builder .component-controls__toolbar--dynamic,
.builder .component-controls__toolbar--dynamic,
.media-kit .component-controls__toolbar--dynamic {
    background: transparent !important;
    border-radius: 4px !important;
    padding: 2px !important;
}

/* Individual control buttons with enhanced specificity */
.gmkb-isolated-builder .component-control,
.builder .component-control,
.media-kit .component-control {
    width: 28px !important;
    height: 28px !important;
    border: none !important;
    background: rgba(255, 255, 255, 0.1) !important;
    color: white !important;
    cursor: pointer !important;
    border-radius: 4px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: all 0.2s ease !important;
    position: relative !important;
    pointer-events: all !important;
    font-size: 14px !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

.gmkb-isolated-builder .component-control:hover,
.builder .component-control:hover,
.media-kit .component-control:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    transform: scale(1.05) !important;
    color: #0ea5e9 !important;
}

/* Specific control button styles with enhanced specificity */
.gmkb-isolated-builder .component-control--edit,
.builder .component-control--edit,
.media-kit .component-control--edit {
    background: rgba(14, 165, 233, 0.3) !important;
    border-color: rgba(14, 165, 233, 0.5) !important;
}

.gmkb-isolated-builder .component-control--duplicate,
.builder .component-control--duplicate,
.media-kit .component-control--duplicate {
    background: rgba(34, 197, 94, 0.3) !important;
    border-color: rgba(34, 197, 94, 0.5) !important;
}

.gmkb-isolated-builder .component-control--delete,
.builder .component-control--delete,
.media-kit .component-control--delete {
    background: rgba(239, 68, 68, 0.3) !important;
    border-color: rgba(239, 68, 68, 0.5) !important;
}

/* Move controls group with enhanced specificity */
.gmkb-isolated-builder .component-control-group--move,
.builder .component-control-group--move,
.media-kit .component-control-group--move {
    display: flex !important;
    flex-direction: column !important;
    gap: 2px !important;
    background: rgba(107, 114, 128, 0.3) !important;
    border: 1px solid rgba(107, 114, 128, 0.5) !important;
    border-radius: 4px !important;
    padding: 2px !important;
}

.gmkb-isolated-builder .component-control--move-up,
.gmkb-isolated-builder .component-control--move-down,
.builder .component-control--move-up,
.builder .component-control--move-down,
.media-kit .component-control--move-up,
.media-kit .component-control--move-down {
    width: 20px !important;
    height: 20px !important;
}

/* ROOT FIX: CRITICAL - Force visibility on hover with highest specificity */
.gmkb-isolated-builder [data-component-id]:hover .component-controls,
.builder [data-component-id]:hover .component-controls,
.media-kit [data-component-id]:hover .component-controls,
.content-section:hover .component-controls,
.editable-element:hover .component-controls,
.media-kit-component:hover .component-controls {
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: all !important;
    transform: translateY(-2px) !important;
}

/* Keep controls visible when hovering the controls themselves */
.gmkb-isolated-builder .component-controls:hover,
.builder .component-controls:hover,
.media-kit .component-controls:hover {
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: all !important;
}

/* Ensure components are properly positioned for controls */
.gmkb-isolated-builder [data-component-id],
.builder [data-component-id],
.media-kit [data-component-id],
.content-section,
.editable-element,
.media-kit-component {
    position: relative !important;
}

/* Component focus states for accessibility */
.builder [data-component-id]:focus .component-controls,
.media-kit [data-component-id]:focus .component-controls {
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: all !important;
}

/* SVG icons in controls with enhanced specificity */
.gmkb-isolated-builder .component-control svg,
.builder .component-control svg,
.media-kit .component-control svg {
    width: 14px !important;
    height: 14px !important;
    stroke: currentColor !important;
    fill: none !important;
    stroke-width: 2 !important;
}

/* DEBUG MODE - Force show all controls with enhanced specificity */
body.gmkb-debug-mode .component-controls,
body.gmkb-debug-mode .component-controls--dynamic {
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: all !important;
    border: 2px solid #0ea5e9 !important;
    background: rgba(14, 165, 233, 0.1) !important;
}

body.gmkb-debug-mode [data-component-id] {
    outline: 2px dashed rgba(14, 165, 233, 0.5) !important;
    outline-offset: 2px !important;
}

body.gmkb-debug-mode .gmkb-isolated-builder [data-component-id] {
    outline: 2px dashed rgba(14, 165, 233, 0.8) !important;
    outline-offset: 2px !important;
}

/* Control tooltips with enhanced specificity */
.gmkb-isolated-builder .component-control[title]:hover::after,
.builder .component-control[title]:hover::after,
.media-kit .component-control[title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: -30px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 10001;
    pointer-events: none;
}

/* Mobile responsive with enhanced specificity */
@media (max-width: 768px) {
    .gmkb-isolated-builder .component-control,
    .builder .component-control,
    .media-kit .component-control {
        width: 32px !important;
        height: 32px !important;
    }
    
    .gmkb-isolated-builder .component-controls,
    .builder .component-controls,
    .media-kit .component-controls {
        top: 4px !important;
        right: 4px !important;
    }
}

/* High contrast mode with enhanced specificity */
@media (prefers-contrast: high) {
    .gmkb-isolated-builder .component-controls--dynamic,
    .builder .component-controls--dynamic,
    .media-kit .component-controls--dynamic {
        background: #000 !important;
        border: 2px solid #fff !important;
    }
    
    .gmkb-isolated-builder .component-control,
    .builder .component-control,
    .media-kit .component-control {
        color: #fff !important;
        border: 1px solid #fff !important;
    }
}

/* Reduced motion with enhanced specificity */
@media (prefers-reduced-motion: reduce) {
    .gmkb-isolated-builder .component-controls,
    .gmkb-isolated-builder .component-control,
    .builder .component-controls,
    .builder .component-control,
    .media-kit .component-controls,
    .media-kit .component-control {
        transition: none !important;
    }
}
