/**\n * @file debug-duplicate-main.js\n * @description Emergency fix for duplicate main.js loading issue\n */\n\nconsole.log('%cðŸš¨ DUPLICATE MAIN.JS DEBUGGING TOOL', 'font-size: 16px; font-weight: bold; color: #dc2626; background: #fef2f2; padding: 4px 8px; border-radius: 4px;');\n\n// Function to detect and fix duplicate main.js loading\nfunction debugDuplicateMainJs() {\n    console.group('%cðŸ” Duplicate Main.js Detection', 'color: #dc2626; font-weight: bold;');\n    \n    // Check for multiple script tags loading main.js\n    const mainJsScripts = document.querySelectorAll('script[src*=\"main.js\"]');\n    console.log(`Found ${mainJsScripts.length} script tags loading main.js:`);\n    \n    mainJsScripts.forEach((script, index) => {\n        console.log(`${index + 1}. ${script.src}`);\n        console.log(`   - Handle: ${script.id || 'no-id'}`);\n        console.log(`   - Loaded: ${script.readyState || 'unknown'}`);\n    });\n    \n    // Check global variable conflicts\n    const globalConflicts = [];\n    const checkGlobals = ['isInitializing', 'isInitialized', 'gmkbApp'];\n    \n    checkGlobals.forEach(globalName => {\n        if (window.hasOwnProperty(globalName)) {\n            globalConflicts.push(globalName);\n        }\n    });\n    \n    if (globalConflicts.length > 0) {\n        console.error('âŒ Global variable conflicts detected:', globalConflicts);\n    } else {\n        console.log('âœ… No global variable conflicts detected');\n    }\n    \n    // Check initialization state\n    if (window.gmkbApp) {\n        console.log('âœ… gmkbApp global object exists');\n        console.log(`   - Initialized: ${window.gmkbApp.isInitialized ? window.gmkbApp.isInitialized() : 'unknown'}`);\n        console.log(`   - Initializing: ${window.gmkbApp.isInitializing ? window.gmkbApp.isInitializing() : 'unknown'}`);\n        console.log(`   - Ready: ${window.gmkbApp.isReady ? window.gmkbApp.isReady() : 'unknown'}`);\n    } else {\n        console.error('âŒ gmkbApp global object not found');\n    }\n    \n    console.groupEnd();\n    \n    return {\n        scriptCount: mainJsScripts.length,\n        globalConflicts,\n        hasGmkbApp: !!window.gmkbApp\n    };\n}\n\n// Function to force clean initialization\nfunction forceCleanInitialization() {\n    console.group('%cðŸ”„ Force Clean Initialization', 'color: #059669; font-weight: bold;');\n    \n    try {\n        // Clear any existing initialization flags\n        if (window.gmkbApp && window.gmkbApp.forceReinitialize) {\n            console.log('ðŸ”„ Using existing forceReinitialize method...');\n            window.gmkbApp.forceReinitialize();\n        } else {\n            console.log('ðŸ› ï¸ Manual clean initialization...');\n            \n            // Force hide loading states\n            const loadingStates = [\n                document.getElementById('loading-state'),\n                document.getElementById('state-loading-enhanced'),\n                document.querySelector('.loading-state'),\n                document.querySelector('.gmkb-loading')\n            ];\n            \n            loadingStates.forEach(element => {\n                if (element) {\n                    element.style.display = 'none';\n                    element.classList.remove('show', 'active');\n                }\n            });\n            \n            // Show builder interface\n            const builderElements = [\n                document.getElementById('media-kit-builder'),\n                document.getElementById('media-kit-preview'),\n                document.querySelector('.media-kit-builder')\n            ];\n            \n            builderElements.forEach(element => {\n                if (element) {\n                    element.style.display = 'block';\n                    element.classList.add('ready');\n                }\n            });\n            \n            // Remove loading classes from body\n            document.body.classList.remove('gmkb-loading', 'loading');\n            document.body.classList.add('gmkb-ready');\n            \n            console.log('âœ… Manual initialization cleanup completed');\n        }\n        \n    } catch (error) {\n        console.error('âŒ Force clean initialization failed:', error);\n    }\n    \n    console.groupEnd();\n}\n\n// Function to fix component data immediately\nfunction fixComponentDataImmediately() {\n    console.group('%cðŸ“¦ Component Data Fix', 'color: #7c3aed; font-weight: bold;');\n    \n    try {\n        if (!window.gmkbComponentsData) {\n            // Try to get from WordPress data\n            const data = window.gmkbData || window.guestifyData;\n            \n            if (data && data.components && data.components.length > 0) {\n                window.gmkbComponentsData = data.components;\n                console.log(`âœ… Component data exposed from WordPress data: ${data.components.length} components`);\n            } else {\n                // Create comprehensive fallback\n                window.gmkbComponentsData = [\n                    {\n                        type: 'hero',\n                        name: 'Hero Section',\n                        title: 'Hero Section',\n                        description: 'A prominent header section with title and subtitle',\n                        category: 'essential',\n                        premium: false,\n                        icon: 'fa-star',\n                        template: 'hero'\n                    },\n                    {\n                        type: 'biography',\n                        name: 'Biography',\n                        title: 'Biography',\n                        description: 'Professional biography section',\n                        category: 'essential',\n                        premium: false,\n                        icon: 'fa-user',\n                        template: 'biography'\n                    },\n                    {\n                        type: 'contact',\n                        name: 'Contact',\n                        title: 'Contact Information',\n                        description: 'Contact details and social links',\n                        category: 'essential',\n                        premium: false,\n                        icon: 'fa-envelope',\n                        template: 'contact'\n                    },\n                    {\n                        type: 'topics',\n                        name: 'Speaking Topics',\n                        title: 'Speaking Topics',\n                        description: 'Your areas of expertise and speaking topics',\n                        category: 'content',\n                        premium: false,\n                        icon: 'fa-list',\n                        template: 'topics'\n                    },\n                    {\n                        type: 'testimonials',\n                        name: 'Testimonials',\n                        title: 'Testimonials',\n                        description: 'Client testimonials and reviews',\n                        category: 'social-proof',\n                        premium: false,\n                        icon: 'fa-quote-left',\n                        template: 'testimonials'\n                    }\n                ];\n                console.log('ðŸ›¡ï¸ Component data fallback created: 5 components');\n            }\n        } else {\n            console.log(`âœ… Component data already available: ${window.gmkbComponentsData.length} components`);\n        }\n        \n        // Also expose categories\n        if (!window.gmkbCategoriesData) {\n            window.gmkbCategoriesData = [\n                { slug: 'essential', name: 'Essential', description: 'Core components for every media kit' },\n                { slug: 'content', name: 'Content', description: 'Content-focused components' },\n                { slug: 'social-proof', name: 'Social Proof', description: 'Testimonials and credibility' }\n            ];\n            console.log('âœ… Categories data created');\n        }\n        \n    } catch (error) {\n        console.error('âŒ Component data fix failed:', error);\n    }\n    \n    console.groupEnd();\n}\n\n// Function to run all emergency fixes\nfunction runEmergencyFixes() {\n    console.log('%cðŸš¨ RUNNING EMERGENCY FIXES FOR DUPLICATE MAIN.JS', 'font-size: 14px; font-weight: bold; color: #ffffff; background: #dc2626; padding: 4px 8px; border-radius: 4px;');\n    \n    const results = {\n        timestamp: new Date().toISOString(),\n        detection: debugDuplicateMainJs(),\n        componentDataFixed: false,\n        initializationForced: false\n    };\n    \n    // Fix component data immediately\n    try {\n        fixComponentDataImmediately();\n        results.componentDataFixed = true;\n    } catch (error) {\n        console.error('Component data fix failed:', error);\n    }\n    \n    // Force clean initialization\n    try {\n        forceCleanInitialization();\n        results.initializationForced = true;\n    } catch (error) {\n        console.error('Force initialization failed:', error);\n    }\n    \n    // Summary\n    console.group('%cðŸ“‹ EMERGENCY FIXES SUMMARY', 'font-size: 12px; font-weight: bold; color: #059669;');\n    console.log('Timestamp:', results.timestamp);\n    console.log('Scripts found:', results.detection.scriptCount);\n    console.log('Global conflicts:', results.detection.globalConflicts.length);\n    console.log('Component data fixed:', results.componentDataFixed ? 'âœ…' : 'âŒ');\n    console.log('Initialization forced:', results.initializationForced ? 'âœ…' : 'âŒ');\n    \n    if (results.detection.scriptCount > 1) {\n        console.warn('âš ï¸ MULTIPLE MAIN.JS SCRIPTS DETECTED - Clear browser cache and refresh');\n    }\n    \n    if (results.componentDataFixed && results.initializationForced) {\n        console.log('%câœ… EMERGENCY FIXES COMPLETED SUCCESSFULLY', 'color: #059669; font-weight: bold;');\n        console.log('The Media Kit Builder should now be functional.');\n    } else {\n        console.log('%câŒ SOME EMERGENCY FIXES FAILED', 'color: #dc2626; font-weight: bold;');\n        console.log('Manual intervention may be required.');\n    }\n    \n    console.groupEnd();\n    \n    // Make results available globally\n    window.duplicateMainJsResults = results;\n    \n    return results;\n}\n\n// Make functions available globally\nwindow.debugDuplicateMainJs = debugDuplicateMainJs;\nwindow.fixComponentDataImmediately = fixComponentDataImmediately;\nwindow.forceCleanInitialization = forceCleanInitialization;\nwindow.runEmergencyFixes = runEmergencyFixes;\n\n// Auto-run emergency fixes after a short delay\nsetTimeout(() => {\n    console.log('ðŸš¨ Auto-running emergency fixes in 3 seconds...');\n    setTimeout(runEmergencyFixes, 3000);\n}, 1000);\n\nconsole.log('%câœ… Duplicate Main.js Debug Tool Loaded', 'color: #059669; font-weight: bold;');\nconsole.log('Available commands:');\nconsole.log('- runEmergencyFixes() - Run all emergency fixes');\nconsole.log('- debugDuplicateMainJs() - Detect duplicate scripts');\nconsole.log('- fixComponentDataImmediately() - Fix component data');\nconsole.log('- forceCleanInitialization() - Force clean init');\n