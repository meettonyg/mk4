#!/bin/bash
echo "====================================="
echo "ROOT FIX: Rebuilding with Category Support"
echo "====================================="
echo ""

echo "Step 1: Running npm build..."
npm run build

echo ""
echo "====================================="
echo "BUILD COMPLETE!"
echo "====================================="
echo ""
echo "The following have been fixed:"
echo ""
echo "1. ✅ PHP gmkb-ajax-handlers.php now formats categories properly"
echo "2. ✅ PHP enqueue.php now passes categories in lean bundle mode"  
echo "3. ✅ Vue ComponentLibrary.vue fixed rendering error (v-show instead of v-if)"
echo "4. ✅ Categories are now passed to JavaScript via gmkbData"
echo ""
echo "To test:"
echo "1. Clear browser cache (Ctrl+Shift+Delete)"
echo "2. Open Media Kit Builder page"
echo "3. Click 'Add Component'"
echo "4. Categories should appear in left sidebar"
echo "5. Components should filter by category without errors"
echo ""
echo "Check console for: window.gmkbData.categories"
echo ""
