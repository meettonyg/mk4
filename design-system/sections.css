/**
 * Section Layouts - Clean BEM Architecture
 * 
 * SINGLE NAMING CONVENTION: BEM (Block Element Modifier)
 * Block: .gmkb-section
 * Element: .gmkb-section__columns, .gmkb-section__column
 * Modifier: .gmkb-section--two_column, .gmkb-section__columns--2
 * 
 * NO BACKWARD COMPATIBILITY - Clean slate implementation
 */

/* ==========================================
   BASE SECTION
   ========================================== */

.gmkb-section {
  width: 100%;
  margin-bottom: var(--gmkb-section-gap);
  position: relative;
}

.gmkb-section__inner {
  max-width: var(--gmkb-container-max-width);
  margin: 0 auto;
  padding: 0 var(--gmkb-container-padding);
}

/* ==========================================
   FULL WIDTH SECTION
   ========================================== */

.gmkb-section--full_width .gmkb-section__content {
  width: 100%;
}

/* ==========================================
   TWO COLUMN LAYOUT
   ========================================== */

.gmkb-section--two_column .gmkb-section__columns,
.gmkb-section__columns--2 {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--gmkb-column-gap);
  align-items: start;
}

/* ==========================================
   THREE COLUMN LAYOUT
   ========================================== */

.gmkb-section--three_column .gmkb-section__columns,
.gmkb-section__columns--3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--gmkb-column-gap);
  align-items: start;
}

/* ==========================================
   MAIN + SIDEBAR LAYOUT (70% / 30%)
   ========================================== */

.gmkb-section--main_sidebar .gmkb-section__columns {
  display: grid;
  grid-template-columns: 7fr 3fr;
  gap: var(--gmkb-column-gap);
  align-items: start;
}

/* ==========================================
   SIDEBAR + MAIN LAYOUT (30% / 70%)
   ========================================== */

.gmkb-section--sidebar_main .gmkb-section__columns {
  display: grid;
  grid-template-columns: 3fr 7fr;
  gap: var(--gmkb-column-gap);
  align-items: start;
}

/* ==========================================
   VERTICAL ALIGNMENT MODIFIERS
   ========================================== */

.gmkb-section__columns--valign-start {
  align-items: start !important;
}

.gmkb-section__columns--valign-center {
  align-items: center !important;
}

.gmkb-section__columns--valign-end {
  align-items: end !important;
}

.gmkb-section__columns--valign-stretch {
  align-items: stretch !important;
}

/* When stretch is used, make columns fill height */
.gmkb-section__columns--valign-stretch .gmkb-section__column {
  display: flex;
  flex-direction: column;
}

.gmkb-section__columns--valign-stretch .gmkb-section__column > * {
  flex: 1;
}

/* ==========================================
   COLUMN WRAPPER
   ========================================== */

.gmkb-section__column {
  min-width: 0; /* Prevent grid blowout */
  width: 100%;
}

/* ==========================================
   FULL WIDTH CONTAINER MODIFIER
   ========================================== */

.gmkb-section--full-width {
  margin-left: calc(-1 * var(--gmkb-container-padding, 20px));
  margin-right: calc(-1 * var(--gmkb-container-padding, 20px));
  width: calc(100% + 2 * var(--gmkb-container-padding, 20px));
  max-width: none;
}

/* ==========================================
   ANIMATIONS
   ========================================== */

.gmkb-section--animate-fade {
  animation: gmkb-fade-in 0.6s ease-out;
}

.gmkb-section--animate-slide {
  animation: gmkb-slide-up 0.6s ease-out;
}

@keyframes gmkb-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes gmkb-slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ==========================================
   RESPONSIVE: VIEWPORT-BASED (Frontend)
   ========================================== */

/* Mobile: Stack all columns */
@media (max-width: 768px) {
  .gmkb-section__columns--2,
  .gmkb-section__columns--3,
  .gmkb-section--two_column .gmkb-section__columns,
  .gmkb-section--three_column .gmkb-section__columns,
  .gmkb-section--main_sidebar .gmkb-section__columns,
  .gmkb-section--sidebar_main .gmkb-section__columns {
    grid-template-columns: 1fr !important;
    gap: var(--gmkb-component-gap);
  }
}

/* Tablet: 3 columns become 2 columns */
@media (min-width: 769px) and (max-width: 1024px) {
  .gmkb-section__columns--3,
  .gmkb-section--three_column .gmkb-section__columns {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

/* ==========================================
   RESPONSIVE: DEVICE PREVIEW MODE (Builder)
   Class-based overrides for preview functionality
   ========================================== */

/* Mobile Preview Mode */
.device-mobile .gmkb-section__columns--2,
.device-mobile .gmkb-section__columns--3,
.device-mobile .gmkb-section--two_column .gmkb-section__columns,
.device-mobile .gmkb-section--three_column .gmkb-section__columns,
.device-mobile .gmkb-section--main_sidebar .gmkb-section__columns,
.device-mobile .gmkb-section--sidebar_main .gmkb-section__columns {
  grid-template-columns: 1fr !important;
  gap: var(--gmkb-component-gap);
}

/* Tablet Preview Mode */
.device-tablet .gmkb-section__columns--3,
.device-tablet .gmkb-section--three_column .gmkb-section__columns {
  grid-template-columns: repeat(2, 1fr) !important;
}

/* ==========================================
   REVERSE COLUMNS ON MOBILE MODIFIER
   ========================================== */

/* Viewport-based reverse */
@media (max-width: 768px) {
  .gmkb-section--reverse-mobile .gmkb-section__columns {
    display: flex !important;
    flex-direction: column-reverse;
  }
  
  .gmkb-section--reverse-mobile .gmkb-section__column {
    width: 100%;
  }
}

/* Device preview reverse */
.device-mobile .gmkb-section--reverse-mobile .gmkb-section__columns {
  display: flex !important;
  flex-direction: column-reverse;
}

.device-mobile .gmkb-section--reverse-mobile .gmkb-section__column {
  width: 100%;
}
